import{u as D,_ as H}from"./GET_REQUESTS.fea82bf3.js";import{a as M,r as a,D as z,f as c,y as w,h as y,c as P,J as T,F as k,E as F,K as I,H as j,k as L,A as q,o as l,t as x,w as A,i as O}from"./entry.e169430c.js";import{u as b}from"./cookie.15737df0.js";import{u as G}from"./POST_REQUESTS.76d2b8df.js";import{H as J}from"./Head.f247d694.js";import{s as K}from"./vue-multiselect.esm.6065e928.js";import"./index.2f476a7c.js";const Q={setup(){const u=G(),d=D(),g=a(""),e=a([]),p=a([]),v=a(!0),m=a([]),f=a(""),_=a(""),t=a([]),o=a(""),R=a(),B=a([]),h=a([]),V=a([]),C=()=>{const n={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+b("token").value}};d.getRequest(`roles/${j().params.id}/edit`,n,s=>{p.value=Object.keys(s.data),v.value=!1,m.value=s.data,s.data.permissions.forEach(r=>{h.value.push({title:r.display_name,id:r.id})}),e.value.name=s.data.name,e.value.description=s.data.description,e.value.display_name=s.data.display_name})},E=()=>{const n={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+b("token").value}};d.getRequest("permissions",n,s=>{t.value=s.data,s.data.data.forEach(r=>{V.value.push({title:r.display_name,id:r.id})})})},N=n=>{_.value=n.id},S=()=>{const n=[],s=h.value.map(i=>i.id);p.value.forEach(i=>{n[i]=e.value[i]});let{...r}=n;r.permissions=s;const U={method:"POST",body:r,headers:{Authorization:"Bearer "+b("token").value}};u.postRequest(`roles/${j().params.id}/update`,U,i=>{i.success?L("/roles"):o.value=i.message})};return z(()=>{C(),E()}),{requestError:g,fieldsObj:e,fields:p,loading:v,arr:m,select:f,selectId:_,permissionsArr:t,changeSelect:N,editUser:S,editError:o,editCurrentArray:R,usersPermisionArr:B,value:h,options:V}},components:{HeadVue:J,MultiSelect:K}},W={class:"d-flex flex-column w-100"},X=["onUpdate:modelValue"],Y=["onUpdate:modelValue"];function Z(u,d,g,e,p,v){const m=q("HeadVue"),f=H,_=q("MultiSelect");return l(),c("div",W,[w(m,{text:u.$t("role")},null,8,["text"]),y("form",{class:I(["createNew-form",{"h-75":e.value.length>5}])},[e.loading?(l(),P(f,{key:0})):T("",!0),(l(!0),c(k,null,F(e.fields,t=>(l(),c("div",{class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item",key:t.id},[t!="permissions"?(l(),c(k,{key:0},[y("label",null,x(u.$t(t)),1),t!="password"&&t!="password_confirmation"?A((l(),c("input",{key:0,disabled:"",class:"w-100 h-100 createNew-form-input",type:"text","onUpdate:modelValue":o=>e.fieldsObj[t]=o},null,8,X)),[[O,e.fieldsObj[t]]]):A((l(),c("input",{key:1,class:"w-100 h-100 createNew-form-input",type:"password","onUpdate:modelValue":o=>e.fieldsObj[t]=o},null,8,Y)),[[O,e.fieldsObj[t]]])],64)):(l(),c(k,{key:1},[y("label",null,x(u.$t(t)),1),w(_,{modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=o=>e.value=o),options:e.options,multiple:!0,"hide-selected":!0,"track-by":"id",label:"title"},null,8,["modelValue","options"])],64))]))),128))],2)])}const re=M(Q,[["render",Z],["__scopeId","data-v-4c65ea65"]]);export{re as default};
