import{a as R,r as c,C as N,f as h,y as _,h as e,H as f,F as q,z as I,c as M,K as x,o as i,D as y,t as s,j as A,J as L,I as V,p as S,l as H,B as $}from"./entry.d7d972f8.js";import{_ as z}from"./Search.38dd5720.js";import{A as U,C as j,_ as O}from"./Actions.3f8d4e01.js";import{u as F,_ as D}from"./GET_REQUESTS.427526b5.js";import{u as B}from"./cookie.1d60285c.js";import{H as P}from"./Head.bb06a6fe.js";import{u as T}from"./POST_REQUESTS.1b833dc9.js";import"./index.2d867956.js";const E={name:"page",setup(){const t="roles",r=T(),C=F(),o=c([]),v=c(!0),g=c([]),u=c(""),d=c(!1),m=c(""),p=c(!1),b=async()=>{const l={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+B("token").value}};C.getRequest(t,l,a=>{g.value=a.data[0],o.value=a.data,v.value=!1})},k=l=>{d.value=!d.value,u.value=l},n=()=>{const l={method:"POST",headers:{Authorization:"Bearer "+B("token").value}};r.postRequest(`roles/${u.value}/delete`,l,a=>{a.code===403?(m.value=a.message,p.value=!0):location.reload()})};return N(()=>{b()}),{usersList:o,loading:v,api_url:t,permissionsList:g,deleteUser:k,confirmDelete:n,confirmModal:d,notAccessMessage:m,activeMessage:p}},components:{HeadVue:P,Loader:D,Actions:U,CreateNew:j}},w=t=>(S("data-v-a94795c9"),t=t(),H(),t),G={class:"programs__page"},J={class:"main__programs-content"},K={class:"users-content-head"},Q=w(()=>e("h3",{class:"users-content-title"},"All Roles",-1)),W={class:"main__programs-content-block"},X={class:"main__content-block-head"},Y=w(()=>e("h3",{class:"main__block-head-title"},"All Roles",-1)),Z={key:0},ee=w(()=>e("thead",null,[e("tr",null,[e("th",{class:"th"},"ID"),e("th",{class:"th"},"Name"),e("th",{class:"th"},"Display Name"),e("th",{class:"th"},"Description"),e("th",{class:"th"},"Action")])],-1)),te={style:{width:"16%"}},oe={class:"dropdown"},se={class:"btn btn-secondary dropdown-toggle bg-success border-0",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},ne={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},ae=["onClick"],le={class:"text-center fs-3"};function ce(t,r,C,o,v,g){const u=$("HeadVue"),d=x,m=z,p=x,b=O,k=D;return i(),h("section",G,[_(u,{text:"Roles",subtitle:"/ Roles"}),e("div",J,[e("div",K,[Q,_(d,{to:"/roles/createNew",class:"main__programs-content-btn modalBtn"},{default:f(()=>[y("Create")]),_:1})]),e("div",W,[e("div",X,[Y,_(m)]),o.loading?(i(),M(k,{key:1})):(i(),h("table",Z,[ee,e("tbody",null,[(i(!0),h(q,null,I(o.usersList.data,(n,l)=>(i(),h("tr",{key:l},[e("td",null,s(n.id),1),e("td",null,s(n.name),1),e("td",null,s(n.display_name),1),e("td",null,s(n.description),1),e("td",te,[e("div",oe,[e("button",se,s(t.$t("action")),1),e("ul",ne,[e("li",null,[_(p,{to:"roles/"+n.id,class:"dropdown-item"},{default:f(()=>[y(s(t.$t("show")),1)]),_:2},1032,["to"])]),e("li",null,[e("a",{class:"dropdown-item",onClick:a=>o.deleteUser(n.id,"roles")},s(t.$t("delete")),9,ae)]),e("li",null,[_(d,{class:"dropdown-item",to:`roles/edit/${n.id}/`},{default:f(()=>[y(s(t.$t("edit")),1)]),_:2},1032,["to"])])])]),o.confirmModal?(i(),M(b,{key:0},{default:f(()=>[e("p",le,s(t.$t("confirmDelete")),1),e("div",null,[e("button",{class:"btn btn-primary",onClick:r[0]||(r[0]=A(a=>o.confirmModal=!o.confirmModal,["prevent"]))},s(t.$t("cancel")),1),e("button",{class:"btn btn-danger",onClick:r[1]||(r[1]=A((...a)=>o.confirmDelete&&o.confirmDelete(...a),["prevent"]))},s(t.$t("perform")),1)]),e("p",{class:L(["text-danger text-center",{"d-none":!o.activeMessage}])},s(o.notAccessMessage),3)]),_:1})):V("",!0)])]))),128))])]))])])])}const fe=R(E,[["render",ce],["__scopeId","data-v-a94795c9"]]);export{fe as default};
