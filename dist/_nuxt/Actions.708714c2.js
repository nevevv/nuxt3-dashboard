import{a as x,o as i,f as _,h as t,E as j,r as a,C as B,t as f,c as h,G as C,H as y,F as O,x as A,w as N,v as q,I as k,s as R,J as S,K as T}from"./entry.71cb6d04.js";import{u as p}from"./cookie.56602984.js";import{u as E}from"./POST_REQUESTS.3deba262.js";const z={props:["modalTitle"],setup(){return{hideModalAfterClickOnBg:()=>{console.log(this)}}}},P={class:"modal-programs"},I={class:"modal-programs-form"};function F(r,o,n,e,u,b){return i(),_("div",null,[t("div",{class:"modals-body-bg",onClick:o[0]||(o[0]=(...d)=>e.hideModalAfterClickOnBg&&e.hideModalAfterClickOnBg(...d))}),t("div",P,[t("form",I,[j(r.$slots,"default")])])])}const D=x(z,[["render",F]]),L={props:["fields","modalName","url"],setup(){const r=E(),o=a(!1),n=a(""),e=a([]),u=a("");return{showModal:o,createNewUser:async()=>{const l={method:"POST",body:e.value,headers:{Authorization:"Bearer "+p("token").value}};r.postRequest(`${u.value}/create`,l,s=>{s.success?location.reload():n.value=s.message})},requestError:n,showCreateModal:(l,s)=>{o.value=!o.value;const m=[];l.forEach(U=>{m[U]=""});let{...g}=m;e.value=g,u.value=s},fieldsObj:e}}},G=t("i",{class:"bi bi-plus plus-icon"},null,-1),H={class:"fs-3 text-center"},J=["onUpdate:modelValue"],K={style:{color:"red"}};function Q(r,o,n,e,u,b){const d=D;return i(),_("div",null,[t("div",null,[t("button",{class:"main__programs-content-btn modalBtn",onClick:o[0]||(o[0]=l=>e.showCreateModal(n.fields,n.url))},[G,B(" Create a new "+f(n.modalName),1)])]),e.showModal?(i(),h(d,{key:0},{default:C(()=>[t("p",H,"Create new "+f(n.modalName),1),(i(!0),_(O,null,A(n.fields,l=>(i(),_("div",{class:"d-flex flex-column align-items-start gap-2",key:l.id},[t("label",null,f(r.$t(l)),1),N(t("input",{type:"text","onUpdate:modelValue":s=>e.fieldsObj[l]=s},null,8,J),[[q,e.fieldsObj[l]]])]))),128)),t("p",K,f(e.requestError),1),t("div",null,[t("button",{class:"btn btn-danger",onClick:o[1]||(o[1]=l=>e.showModal=!e.showModal)},"Cancel"),t("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=k((...l)=>e.createNewUser&&e.createNewUser(...l),["prevent"]))},"Create")])]),_:1})):y("",!0)])}const ce=x(L,[["render",Q]]),W={props:["list","fields","url"],setup(){const r=E(),o=a(!1),n=a(!1),e=a(""),u=a(!1),b=a(""),d=a(),l=a(!1),s=a(""),m=a(""),g=a("");return{edit:(v,c,w)=>{l.value=!0,s.value=v,d.value=Object.assign({},c),g.value=w},deleteUser:(v,c)=>{o.value=!o.value,e.value=v,g.value=c},confirmDelete:()=>{const v={method:"POST",headers:{Authorization:"Bearer "+p("token").value}};r.postRequest(`${g.value}/${e.value}/delete`,v,c=>{c.code===403?(b.value=c.message,u.value=!0):location.reload()})},editUser:v=>{const c=[];v.forEach(M=>{console.log(d.value[M]),c[M]=d.value[M]});let{...w}=c;const V={method:"POST",body:w,headers:{Authorization:"Bearer "+p("token").value}};r.postRequest(`${g.value}/${s.value}/update`,V,M=>{M.success?location.reload():m.value=M.message})},confirmModal:o,showModal:n,activeMessage:u,notAccessMessage:b,editModal:l,editCurrentArray:d,editError:m}}},X={class:"dropdown"},Y=t("button",{class:"btn btn-secondary dropdown-toggle bg-success border-0",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Action ",-1),Z={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},$=t("p",{class:"text-center fs-3"},"Do you really want to delete the user?",-1),ee=t("p",{class:"fs-3 text-center"},"Edit User",-1),te=["onUpdate:modelValue"],oe={style:{color:"red"}};function ne(r,o,n,e,u,b){const d=S,l=D;return i(),_("div",null,[t("div",null,[t("div",X,[Y,t("ul",Z,[t("li",null,[R(d,{to:n.url+"/"+n.list.id,class:"dropdown-item"},{default:C(()=>[B("Show ")]),_:1},8,["to"])]),t("li",null,[t("a",{class:"dropdown-item",onClick:o[0]||(o[0]=s=>e.deleteUser(n.list.id,n.url))},"Delete")]),t("li",null,[t("a",{class:"dropdown-item",onClick:o[1]||(o[1]=s=>e.edit(n.list.id,n.list,n.url))}," Edit ")])])])]),e.confirmModal?(i(),h(l,{key:0},{default:C(()=>[$,t("div",null,[t("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=k(s=>e.confirmModal=!e.confirmModal,["prevent"]))},"Cancel"),t("button",{class:"btn btn-danger",onClick:o[3]||(o[3]=k((...s)=>e.confirmDelete&&e.confirmDelete(...s),["prevent"]))},"Delete")]),t("p",{class:T(["text-danger text-center",{"d-none":!e.activeMessage}])},f(e.notAccessMessage),3)]),_:1})):y("",!0),e.editModal?(i(),h(l,{key:1},{default:C(()=>[ee,(i(!0),_(O,null,A(n.fields,s=>(i(),_("div",{class:"d-flex flex-column align-items-start gap-2",key:s.id},[t("label",null,f(r.$t(s)),1),N(t("input",{type:"text","onUpdate:modelValue":m=>e.editCurrentArray[s]=m},null,8,te),[[q,e.editCurrentArray[s]]])]))),128)),t("p",oe,f(e.editError),1),t("div",null,[t("button",{class:"btn btn-danger",onClick:o[4]||(o[4]=s=>e.editModal=!e.editModal)},"Cancel"),t("button",{class:"btn btn-primary",onClick:o[5]||(o[5]=k(s=>e.editUser(n.fields),["prevent"]))},"Edit")])]),_:1})):y("",!0)])}const ue=x(W,[["render",ne]]);export{D as M,ue as _,ce as a};
