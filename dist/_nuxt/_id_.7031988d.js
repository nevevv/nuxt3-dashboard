import{u as M,_ as D}from"./GET_REQUESTS.e7dfadbd.js";import{a as H,r as s,B as U,f as i,y as w,h as V,c as z,I as y,F as k,C as S,E as x,k as T,A as j,o as n,t as A,w as F,i as I}from"./entry.71a57e02.js";import{u as g}from"./cookie.820c3a4b.js";import{u as L}from"./POST_REQUESTS.730cf731.js";import{H as P}from"./Head.b01dfced.js";import{s as $}from"./vue-multiselect.esm.1f8f5d04.js";import"./index.4fa70c02.js";const G={setup(){const u=L(),d=M(),b=s(""),t=s([]),p=s([]),v=s(!0),m=s([]),f=s(""),_=s(""),e=s([]),c=s(""),B=s(),h=s([]),q=s([]),O=()=>{const a={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+g("token").value}};d.getRequest(`users/${x().params.id}/edit`,a,o=>{o.data.roles.forEach(r=>{h.value.push({title:r.display_name,id:r.id})}),p.value=Object.keys(o.data),v.value=!1,m.value=o.data,t.value.full_name=o.data.full_name,t.value.login=o.data.login})},R=()=>{const a={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+g("token").value}};d.getRequest("roles",a,o=>{e.value=o.data,o.data.data.forEach(r=>{q.value.push({title:r.display_name,id:r.id})})})},C=a=>{_.value=a.id},E=()=>{const a=[];p.value.forEach(l=>{a[l]=t.value[l]});let{...o}=a;const r=h.value.map(l=>l.id);o.roles=r;const N={method:"POST",body:o,headers:{Authorization:"Bearer "+g("token").value}};u.postRequest(`users/${x().params.id}/update`,N,l=>{l.success?T("/users"):c.value=l.message})};return U(()=>{O(),R()}),{requestError:b,fieldsObj:t,fields:p,loading:v,arr:m,select:f,selectId:_,permissionsArr:e,changeSelect:C,editUser:E,editError:c,editCurrentArray:B,options:q,value:h}},components:{HeadVue:P,Multiselect:$}},J={class:"d-flex flex-column w-100"},K={class:"createNew-form"},Q={key:0},W=["onUpdate:modelValue"];function X(u,d,b,t,p,v){const m=j("HeadVue"),f=D,_=j("Multiselect");return n(),i("div",J,[w(m,{text:u.$t("user")},null,8,["text"]),V("form",K,[t.loading?(n(),z(f,{key:0})):y("",!0),(n(!0),i(k,null,S(t.fields,e=>(n(),i("div",{class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item",key:e.id},[e!="roles"?(n(),i(k,{key:0},[e!="password"&&e!="password_confirmation"?(n(),i("label",Q,A(u.$t(e)),1)):y("",!0),e!="password"&&e!="password_confirmation"?F((n(),i("input",{key:1,disabled:"",class:"w-100 h-100 createNew-form-input",type:"text","onUpdate:modelValue":c=>t.fieldsObj[e]=c},null,8,W)),[[I,t.fieldsObj[e]]]):y("",!0)],64)):(n(),i(k,{key:1},[V("label",null,A(u.$t(e)),1),w(_,{class:"multiselect",modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=c=>t.value=c),options:t.options,multiple:!0,"hide-selected":!0,"track-by":"id",label:"title"},null,8,["modelValue","options"])],64))]))),128))])])}const ne=H(G,[["render",X]]);export{ne as default};
