import{u as M,_ as z}from"./GET_REQUESTS.e7dfadbd.js";import{a as D,r as a,B as H,f as c,y as w,h as y,c as I,I as P,F as b,C as T,J as F,E as j,k as L,A as q,o as l,t as x,w as A,i as O}from"./entry.71a57e02.js";import{u as k}from"./cookie.820c3a4b.js";import{u as G}from"./POST_REQUESTS.730cf731.js";import{H as J}from"./Head.b01dfced.js";import{s as K}from"./vue-multiselect.esm.1f8f5d04.js";import"./index.4fa70c02.js";const Q={setup(){const u=G(),d=M(),g=a(""),e=a([]),p=a([]),v=a(!0),m=a([]),f=a(""),_=a(""),t=a([]),o=a(""),B=a(),C=a([]),h=a([]),V=a([]),R=()=>{const n={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+k("token").value}};d.getRequest(`roles/${j().params.id}/edit`,n,s=>{p.value=Object.keys(s.data),v.value=!1,m.value=s.data,s.data.permissions.forEach(r=>{h.value.push({title:r.display_name,id:r.id})}),e.value.name=s.data.name,e.value.description=s.data.description,e.value.display_name=s.data.display_name})},E=()=>{const n={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+k("token").value}};d.getRequest("permissions",n,s=>{t.value=s.data,s.data.data.forEach(r=>{V.value.push({title:r.display_name,id:r.id})})})},N=n=>{_.value=n.id},S=()=>{const n=[],s=h.value.map(i=>i.id);p.value.forEach(i=>{n[i]=e.value[i]});let{...r}=n;r.permissions=s;const U={method:"POST",body:r,headers:{Authorization:"Bearer "+k("token").value}};u.postRequest(`roles/${j().params.id}/update`,U,i=>{i.success?L("/roles"):o.value=i.message})};return H(()=>{R(),E()}),{requestError:g,fieldsObj:e,fields:p,loading:v,arr:m,select:f,selectId:_,permissionsArr:t,changeSelect:N,editUser:S,editError:o,editCurrentArray:B,usersPermisionArr:C,value:h,options:V}},components:{HeadVue:J,MultiSelect:K}},W={class:"d-flex flex-column w-100"},X=["onUpdate:modelValue"],Y=["onUpdate:modelValue"];function Z(u,d,g,e,p,v){const m=q("HeadVue"),f=z,_=q("MultiSelect");return l(),c("div",W,[w(m,{text:u.$t("role")},null,8,["text"]),y("form",{class:F(["createNew-form",{"h-75":e.value.length>5}])},[e.loading?(l(),I(f,{key:0})):P("",!0),(l(!0),c(b,null,T(e.fields,t=>(l(),c("div",{class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item",key:t.id},[t!="permissions"?(l(),c(b,{key:0},[y("label",null,x(u.$t(t)),1),t!="password"&&t!="password_confirmation"?A((l(),c("input",{key:0,disabled:"",class:"w-100 h-100 createNew-form-input",type:"text","onUpdate:modelValue":o=>e.fieldsObj[t]=o},null,8,X)),[[O,e.fieldsObj[t]]]):A((l(),c("input",{key:1,class:"w-100 h-100 createNew-form-input",type:"password","onUpdate:modelValue":o=>e.fieldsObj[t]=o},null,8,Y)),[[O,e.fieldsObj[t]]])],64)):(l(),c(b,{key:1},[y("label",null,x(u.$t(t)),1),w(_,{modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=o=>e.value=o),options:e.options,multiple:!0,"hide-selected":!0,"track-by":"id",label:"title"},null,8,["modelValue","options"])],64))]))),128))],2)])}const re=D(Q,[["render",Z],["__scopeId","data-v-66bf5c7a"]]);export{re as default};
