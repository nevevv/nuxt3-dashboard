import{u as A,_ as C}from"./GET_REQUESTS.e7dfadbd.js";import{a as U,r as s,B as M,f as i,y as N,h as u,t as p,c as S,I as E,F as w,C as H,j as z,k as D,o as n,w as V,i as j,A as q}from"./entry.71a57e02.js";import{u as g}from"./cookie.820c3a4b.js";import{u as I}from"./POST_REQUESTS.730cf731.js";import{H as T}from"./Head.b01dfced.js";import{s as F}from"./vue-multiselect.esm.1f8f5d04.js";import"./index.4fa70c02.js";const L={setup(){const d=I(),r=A(),f=s(""),e=s([]),v=s([]),y=s(!0),m=s([]),h=s(""),_=s(""),t=s([]),a=s([]),b=()=>{const l={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+g("token").value}};r.getRequest("users/create",l,c=>{y.value=!1,v.value=c.data;const o=[];c.data.forEach(B=>{o[B]=""});let{...R}=o;e.value=R})},k=()=>{const l={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+g("token").value}};r.getRequest("roles",l,c=>{m.value=c.data.data,c.data.data.forEach(o=>{console.log(o.display_name),console.log(o.id),a.value.push({title:o.display_name,id:o.id})})})},x=async()=>{const l=t.value.map(o=>o.id);e.value.roles=l;const c={method:"POST",body:e.value,headers:{Authorization:"Bearer "+g("token").value}};d.postRequest("users/create",c,o=>{o.success?D("/users"):f.value=o.message})},O=l=>{_.value=l.id};return M(()=>{b(),k()}),{options:a,value:t,createData:b,getRoles:k,requestError:f,fieldsObj:e,fields:v,loading:y,arr:m,select:h,selectId:_,changeSelect:O,createNewUser:x}},components:{HeadVue:T,MultiSelect:F}},P={class:"d-flex flex-column w-100"},G={class:"fs-3 createNew-title pt-3"},J={class:"createNew-form"},K=["onUpdate:modelValue"],Q=["onUpdate:modelValue"],W={style:{color:"red"},class:"d-flex w-100 text-danger"},X={class:"d-flex justify-content-start w-100"};function Y(d,r,f,e,v,y){const m=q("HeadVue"),h=C,_=q("MultiSelect");return n(),i("div",P,[N(m),u("p",G,p(d.$t("create")),1),u("form",J,[e.loading?(n(),S(h,{key:0})):E("",!0),(n(!0),i(w,null,H(e.fields,t=>(n(),i("div",{class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item",key:t.id},[t!="roles"?(n(),i(w,{key:0},[u("label",null,p(d.$t(t)),1),t!="password"&&t!="password_confirmation"?V((n(),i("input",{key:0,class:"w-100 h-100 createNew-form-input",type:"text","onUpdate:modelValue":a=>e.fieldsObj[t]=a},null,8,K)),[[j,e.fieldsObj[t]]]):V((n(),i("input",{key:1,class:"w-100 h-100 createNew-form-input",type:"password","onUpdate:modelValue":a=>e.fieldsObj[t]=a},null,8,Q)),[[j,e.fieldsObj[t]]])],64)):(n(),i(w,{key:1},[u("label",null,p(d.$t(t)),1),N(_,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=a=>e.value=a),options:e.options,multiple:!0,"hide-selected":!0,"track-by":"id",label:"title",placeholder:"Rolni tanlang"},null,8,["modelValue","options"])],64))]))),128)),u("p",W,p(e.requestError),1),u("div",X,[u("button",{type:"submit",class:"btn btn-primary createNew-btn",onClick:r[1]||(r[1]=z(t=>e.createNewUser(),["prevent"]))},p(d.$t("create")),1)])])])}const ne=U(L,[["render",Y],["__scopeId","data-v-1efac757"]]);export{ne as default};
