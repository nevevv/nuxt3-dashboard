import{a as x,o as d,f,h as t,E as j,r as a,C as N,t as _,c as y,G as g,H as h,F as q,x as E,w as B,v as O,I as C,s as R,J as S,K as T}from"./entry.79f9e98a.js";import{u as k}from"./cookie.f4052aae.js";import{u as A}from"./POST_REQUESTS.6a693605.js";const z={props:["modalTitle"]},P=t("div",{class:"modals-body-bg"},null,-1),I={class:"modal-programs"},F={class:"modal-programs-form"};function L(r,o,n,e,c,b){return d(),f("div",null,[P,t("div",I,[t("form",F,[j(r.$slots,"default")])])])}const D=x(z,[["render",L]]),G={props:["fields","modalName","url"],setup(){const r=A(),o=a(!1),n=a(""),e=a([]),c=a("");return{showModal:o,createNewUser:async()=>{const l={method:"POST",body:e.value,headers:{Authorization:"Bearer "+k("token").value}};r.postRequest(`${c.value}/create`,l,s=>{s.success?location.reload():n.value=s.message})},requestError:n,showCreateModal:(l,s)=>{o.value=!o.value;const m=[];l.forEach(U=>{m[U]=""});let{...w}=m;e.value=w,c.value=s},fieldsObj:e}}},H=t("i",{class:"bi bi-plus plus-icon"},null,-1),J={class:"fs-3 text-center"},K=["onUpdate:modelValue"],Q={style:{color:"red"}};function W(r,o,n,e,c,b){const u=D;return d(),f("div",null,[t("div",null,[t("button",{class:"main__programs-content-btn modalBtn",onClick:o[0]||(o[0]=l=>e.showCreateModal(n.fields,n.url))},[H,N(" Create a new "+_(n.modalName),1)])]),e.showModal?(d(),y(u,{key:0},{default:g(()=>[t("p",J,"Create new "+_(n.modalName),1),(d(!0),f(q,null,E(n.fields,l=>(d(),f("div",{class:"d-flex flex-column align-items-start gap-2",key:l.id},[t("label",null,_(r.$t(l)),1),B(t("input",{type:"text","onUpdate:modelValue":s=>e.fieldsObj[l]=s},null,8,K),[[O,e.fieldsObj[l]]])]))),128)),t("p",Q,_(e.requestError),1),t("div",null,[t("button",{class:"btn btn-danger",onClick:o[1]||(o[1]=l=>e.showModal=!e.showModal)},"Cancel"),t("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=C((...l)=>e.createNewUser&&e.createNewUser(...l),["prevent"]))},"Create")])]),_:1})):h("",!0)])}const ue=x(G,[["render",W]]),X={props:["list","fields","url"],setup(){const r=A(),o=a(!1),n=a(!1),e=a(""),c=a(!1),b=a(""),u=a(),l=a(!1),s=a(""),m=a(""),w=a("");return{edit:(v,i,p)=>{l.value=!0,s.value=v,u.value=Object.assign({},i),w.value=p},deleteUser:(v,i)=>{o.value=!o.value,e.value=v,w.value=i},confirmDelete:()=>{const v={method:"POST",headers:{Authorization:"Bearer "+k("token").value}};r.postRequest(`${w.value}/${e.value}/delete`,v,i=>{i.code===403?(b.value=i.message,c.value=!0):location.reload()})},editUser:v=>{const i=[];v.forEach(M=>{i[M]=u.value[M]});let{...p}=i;const V={method:"POST",body:p,headers:{Authorization:"Bearer "+k("token").value}};r.postRequest(`${w.value}/${s.value}/update`,V,M=>{M.success?location.reload():m.value=M.message})},confirmModal:o,showModal:n,activeMessage:c,notAccessMessage:b,editModal:l,editCurrentArray:u,editError:m}}},Y={class:"dropdown"},Z=t("button",{class:"btn btn-secondary dropdown-toggle bg-success border-0",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Action ",-1),$={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},ee=t("p",{class:"text-center fs-3"},"Do you really want to delete the user?",-1),te=t("p",{class:"fs-3 text-center"},"Edit User",-1),oe=["onUpdate:modelValue"],ne={style:{color:"red"}};function se(r,o,n,e,c,b){const u=S,l=D;return d(),f("div",null,[t("div",null,[t("div",Y,[Z,t("ul",$,[t("li",null,[R(u,{to:n.url+"/"+n.list.id,class:"dropdown-item"},{default:g(()=>[N("Show ")]),_:1},8,["to"])]),t("li",null,[t("a",{class:"dropdown-item",onClick:o[0]||(o[0]=s=>e.deleteUser(n.list.id,n.url))},"Delete")]),t("li",null,[t("a",{class:"dropdown-item",onClick:o[1]||(o[1]=s=>e.edit(n.list.id,n.list,n.url))}," Edit ")])])])]),e.confirmModal?(d(),y(l,{key:0},{default:g(()=>[ee,t("div",null,[t("button",{class:"btn btn-primary",onClick:o[2]||(o[2]=C(s=>e.confirmModal=!e.confirmModal,["prevent"]))},"Cancel"),t("button",{class:"btn btn-danger",onClick:o[3]||(o[3]=C((...s)=>e.confirmDelete&&e.confirmDelete(...s),["prevent"]))},"Delete")]),t("p",{class:T(["text-danger text-center",{"d-none":!e.activeMessage}])},_(e.notAccessMessage),3)]),_:1})):h("",!0),e.editModal?(d(),y(l,{key:1},{default:g(()=>[te,(d(!0),f(q,null,E(n.fields,s=>(d(),f("div",{class:"d-flex flex-column align-items-start gap-2",key:s.id},[t("label",null,_(r.$t(s)),1),B(t("input",{type:"text","onUpdate:modelValue":m=>e.editCurrentArray[s]=m},null,8,oe),[[O,e.editCurrentArray[s]]])]))),128)),t("p",ne,_(e.editError),1),t("div",null,[t("button",{class:"btn btn-danger",onClick:o[4]||(o[4]=s=>e.editModal=!e.editModal)},"Cancel"),t("button",{class:"btn btn-primary",onClick:o[5]||(o[5]=C(s=>e.editUser(n.fields),["prevent"]))},"Edit")])]),_:1})):h("",!0)])}const me=x(X,[["render",se]]);export{D as M,me as _,ue as a};
