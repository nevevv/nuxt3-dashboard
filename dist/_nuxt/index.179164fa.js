import{a as R,r as c,D as N,f as h,y as _,h as e,B as f,F as q,E as L,c as C,C as M,o as i,G as y,t as s,j as A,K as V,J as I,p as S,l as $,A as H}from"./entry.e169430c.js";import{_ as U}from"./Search.c2c260eb.js";import{A as j,C as z,_ as O}from"./Actions.8ff22823.js";import{u as E,_ as D}from"./GET_REQUESTS.fea82bf3.js";import{u as B}from"./cookie.15737df0.js";import{H as F}from"./Head.f247d694.js";import{u as G}from"./POST_REQUESTS.76d2b8df.js";import"./index.2f476a7c.js";const P={name:"page",setup(){const t="roles",r=G(),x=E(),o=c([]),v=c(!0),g=c([]),u=c(""),d=c(!1),m=c(""),p=c(!1),b=async()=>{const l={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+B("token").value}};x.getRequest(t,l,a=>{g.value=a.data[0],o.value=a.data,v.value=!1})},k=l=>{d.value=!d.value,u.value=l},n=()=>{const l={method:"POST",headers:{Authorization:"Bearer "+B("token").value}};r.postRequest(`roles/${u.value}/delete`,l,a=>{a.code===403?(m.value=a.message,p.value=!0):location.reload()})};return N(()=>{b()}),{usersList:o,loading:v,api_url:t,permissionsList:g,deleteUser:k,confirmDelete:n,confirmModal:d,notAccessMessage:m,activeMessage:p}},components:{HeadVue:F,Loader:D,Actions:j,CreateNew:z}},w=t=>(S("data-v-1659b48a"),t=t(),$(),t),T={class:"programs__page"},J={class:"main__programs-content"},K={class:"users-content-head"},Q=w(()=>e("h3",{class:"users-content-title"},"All Roles",-1)),W={class:"main__programs-content-block"},X={class:"main__content-block-head"},Y=w(()=>e("h3",{class:"main__block-head-title"},"All Roles",-1)),Z={key:0},ee=w(()=>e("thead",null,[e("tr",null,[e("th",{class:"th"},"ID"),e("th",{class:"th"},"Name"),e("th",{class:"th"},"Display Name"),e("th",{class:"th"},"Description"),e("th",{class:"th"},"Action")])],-1)),te={style:{width:"16%"}},oe={class:"dropdown"},se={class:"btn btn-secondary dropdown-toggle bg-success border-0",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},ne={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},ae=["onClick"],le={class:"text-center fs-3"};function ce(t,r,x,o,v,g){const u=H("HeadVue"),d=M,m=U,p=M,b=O,k=D;return i(),h("section",T,[_(u,{text:"Roles",subtitle:"/ Roles"}),e("div",J,[e("div",K,[Q,_(d,{to:"/roles/createNew",class:"main__programs-content-btn modalBtn"},{default:f(()=>[y(s(t.$t("create")),1)]),_:1})]),e("div",W,[e("div",X,[Y,_(m)]),o.loading?(i(),C(k,{key:1})):(i(),h("table",Z,[ee,e("tbody",null,[(i(!0),h(q,null,L(o.usersList.data,(n,l)=>(i(),h("tr",{key:l},[e("td",null,s(n.id),1),e("td",null,s(n.name),1),e("td",null,s(n.display_name),1),e("td",null,s(n.description),1),e("td",te,[e("div",oe,[e("button",se,s(t.$t("action")),1),e("ul",ne,[e("li",null,[_(p,{to:"roles/"+n.id,exact:"",class:"dropdown-item"},{default:f(()=>[y(s(t.$t("show")),1)]),_:2},1032,["to"])]),e("li",null,[e("a",{class:"dropdown-item",onClick:a=>o.deleteUser(n.id,"roles")},s(t.$t("delete")),9,ae)]),e("li",null,[_(d,{class:"dropdown-item",exact:"",to:`roles/edit/${n.id}/`},{default:f(()=>[y(s(t.$t("edit")),1)]),_:2},1032,["to"])])])]),o.confirmModal?(i(),C(b,{key:0},{default:f(()=>[e("p",le,s(t.$t("confirmDelete")),1),e("div",null,[e("button",{class:"btn btn-primary",onClick:r[0]||(r[0]=A(a=>o.confirmModal=!o.confirmModal,["prevent"]))},s(t.$t("cancel")),1),e("button",{class:"btn btn-danger",onClick:r[1]||(r[1]=A((...a)=>o.confirmDelete&&o.confirmDelete(...a),["prevent"]))},s(t.$t("perform")),1)]),e("p",{class:V(["text-danger text-center",{"d-none":!o.activeMessage}])},s(o.notAccessMessage),3)]),_:1})):I("",!0)])]))),128))])]))])])])}const fe=R(P,[["render",ce],["__scopeId","data-v-1659b48a"]]);export{fe as default};
