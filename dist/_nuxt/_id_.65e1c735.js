import{u as S,_ as D}from"./GET_REQUESTS.fea82bf3.js";import{a as H,r as s,D as z,f as d,y as V,h as u,t as m,c as P,J as T,F as k,E as F,j as I,H as q,k as L,o as i,w as A,i as O,A as x}from"./entry.e169430c.js";import{u as w}from"./cookie.15737df0.js";import{u as G}from"./POST_REQUESTS.76d2b8df.js";import{H as J}from"./Head.f247d694.js";import{s as K}from"./vue-multiselect.esm.6065e928.js";import"./index.2f476a7c.js";const Q={setup(){const p=G(),l=S(),g=s(""),e=s([]),_=s([]),y=s(!0),f=s([]),h=s(""),v=s(""),t=s([]),a=s(""),N=s(),E=s([]),b=s([]),j=s([]),R=()=>{const n={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token").value}};l.getRequest(`roles/${q().params.id}/edit`,n,o=>{_.value=Object.keys(o.data),y.value=!1,f.value=o.data,o.data.permissions.forEach(r=>{b.value.push({title:r.display_name,id:r.id})}),e.value.name=o.data.name,e.value.description=o.data.description,e.value.display_name=o.data.display_name})},B=()=>{const n={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token").value}};l.getRequest("permissions",n,o=>{t.value=o.data,o.data.data.forEach(r=>{j.value.push({title:r.display_name,id:r.id})})})},C=n=>{v.value=n.id},U=()=>{const n=[],o=b.value.map(c=>c.id);_.value.forEach(c=>{n[c]=e.value[c]});let{...r}=n;r.permissions=o;const M={method:"POST",body:r,headers:{Authorization:"Bearer "+w("token").value}};p.postRequest(`roles/${q().params.id}/update`,M,c=>{c.success?L("/roles"):a.value=c.message})};return z(()=>{R(),B()}),{requestError:g,fieldsObj:e,fields:_,loading:y,arr:f,select:h,selectId:v,permissionsArr:t,changeSelect:C,editUser:U,editError:a,editCurrentArray:N,usersPermisionArr:E,value:b,options:j}},components:{HeadVue:J,MultiSelect:K}},W={class:"d-flex flex-column w-100"},X={class:"fs-3 createNew-title pt-3"},Y={class:"createNew-form h-55"},Z=["onUpdate:modelValue"],$=["onUpdate:modelValue"],ee={class:"text-danger"},te={class:"d-flex justify-content-start w-100 align-items-center"};function se(p,l,g,e,_,y){const f=x("HeadVue"),h=D,v=x("MultiSelect");return i(),d("div",W,[V(f),u("p",X,m(p.$t("edit")),1),u("form",Y,[e.loading?(i(),P(h,{key:0})):T("",!0),(i(!0),d(k,null,F(e.fields,t=>(i(),d("div",{class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item",key:t.id},[t!="permissions"?(i(),d(k,{key:0},[u("label",null,m(p.$t(t)),1),t!="password"&&t!="password_confirmation"?A((i(),d("input",{key:0,class:"w-100 h-100 createNew-form-input",type:"text","onUpdate:modelValue":a=>e.fieldsObj[t]=a},null,8,Z)),[[O,e.fieldsObj[t]]]):A((i(),d("input",{key:1,class:"w-100 h-100 createNew-form-input",type:"password","onUpdate:modelValue":a=>e.fieldsObj[t]=a},null,8,$)),[[O,e.fieldsObj[t]]])],64)):(i(),d(k,{key:1},[u("label",null,m(p.$t(t)),1),V(v,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value=a),options:e.options,multiple:!0,"hide-selected":!0,"track-by":"id",label:"title"},null,8,["modelValue","options"])],64))]))),128)),u("p",ee,m(e.requestError),1),u("div",te,[u("button",{type:"submit",class:"btn btn-primary createNew-btn",onClick:l[1]||(l[1]=I(t=>e.editUser(),["prevent"]))},m(p.$t("perform")),1)])])])}const de=H(Q,[["render",se],["__scopeId","data-v-919f34b9"]]);export{de as default};
