import{a as U,o as i,f as b,h as o,E as j,r as a,C as O,t as f,c as h,G as k,H as x,F as A,x as B,w as N,v as q,I as M,s as R,J as S,K as T}from"./entry.cc575467.js";import{u as w}from"./cookie.a478a7c9.js";import{u as E}from"./POST_REQUESTS.fbf4c081.js";const z={props:["modalTitle"],setup(){return{hideModalAfterClickOnBg:()=>{console.log(this)}}}},P={class:"modal-programs"},I={class:"modal-programs-form"};function F(r,t,n,e,u,_){return i(),b("div",null,[o("div",{class:"modals-body-bg",onClick:t[0]||(t[0]=(...d)=>e.hideModalAfterClickOnBg&&e.hideModalAfterClickOnBg(...d))}),o("div",P,[o("form",I,[j(r.$slots,"default")])])])}const D=U(z,[["render",F]]),L={props:["fields","modalName","url"],setup(){const r=E(),t=a(!1),n=a(""),e=a([]),u=a("");return{showModal:t,createNewUser:async()=>{const l={method:"POST",body:e.value,headers:{Authorization:"Bearer "+w("token").value}};r.postRequest(`${u.value}/create`,l,s=>{s.success?location.reload():n.value=s.message})},requestError:n,showCreateModal:(l,s)=>{t.value=!t.value;const m=[];l.forEach(p=>{m[p]=""});let{...g}=m;e.value=g,u.value=s},fieldsObj:e}}},G=o("i",{class:"bi bi-plus plus-icon"},null,-1),H={class:"fs-3 text-center"},J=["onUpdate:modelValue"],K={style:{color:"red"}};function Q(r,t,n,e,u,_){const d=D;return i(),b("div",null,[o("div",null,[o("button",{class:"main__programs-content-btn modalBtn",onClick:t[0]||(t[0]=l=>e.showCreateModal(n.fields,n.url))},[G,O(" Create a new "+f(n.modalName),1)])]),e.showModal?(i(),h(d,{key:0},{default:k(()=>[o("p",H,"Create new "+f(n.modalName),1),(i(!0),b(A,null,B(n.fields,l=>(i(),b("div",{class:"d-flex flex-column align-items-start gap-2",key:l.id},[o("label",null,f(r.$t(l)),1),N(o("input",{type:"text","onUpdate:modelValue":s=>e.fieldsObj[l]=s},null,8,J),[[q,e.fieldsObj[l]]])]))),128)),o("p",K,f(e.requestError),1),o("div",null,[o("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=l=>e.showModal=!e.showModal)},"Cancel"),o("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=M((...l)=>e.createNewUser&&e.createNewUser(...l),["prevent"]))},"Create")])]),_:1})):x("",!0)])}const re=U(L,[["render",Q]]),W={props:["list","fields","url"],setup(){const r=E(),t=a(!1),n=a(!1),e=a(""),u=a(!1),_=a(""),d=a(),l=a(!1),s=a(""),m=a(""),g=a("");return{edit:(v,c,y)=>{l.value=!0,s.value=v,d.value=Object.assign({},c),g.value=y},deleteUser:(v,c)=>{t.value=!t.value,e.value=v,g.value=c},confirmDelete:()=>{const v={method:"POST",headers:{Authorization:"Bearer "+w("token").value}};r.postRequest(`${g.value}/${e.value}/delete`,v,c=>{c.code===403?(_.value=c.message,u.value=!0):location.reload()})},editUser:v=>{const c=[];v.forEach(C=>{console.log(d.value[C]),c[C]=d.value[C]});let{...y}=c;const V={method:"POST",body:y,headers:{Authorization:"Bearer "+w("token").value}};r.postRequest(`${g.value}/${s.value}/update`,V,C=>{C.success?location.reload():m.value=C.message})},confirmModal:t,showModal:n,activeMessage:u,notAccessMessage:_,editModal:l,editCurrentArray:d,editError:m}}},X=o("p",{class:"text-center fs-3"},"Do you really want to delete the user?",-1),Y=o("p",{class:"fs-3 text-center"},"Edit User",-1),Z=["onUpdate:modelValue"],$={style:{color:"red"}};function ee(r,t,n,e,u,_){const d=S,l=D;return i(),b("div",null,[o("div",null,[R(d,{to:n.url+"/"+n.list.id,class:"btn",style:{background:"#008838",color:"white"}},{default:k(()=>[O("Show")]),_:1},8,["to"]),o("button",{class:"btn btn-danger",style:{margin:"0 0 0 10px"},onClick:t[0]||(t[0]=s=>e.deleteUser(n.list.id,n.url))},"Delete"),o("button",{class:"btn btn-warning",style:{margin:"0 0 0 10px"},onClick:t[1]||(t[1]=s=>e.edit(n.list.id,n.list,n.url))},"Edit")]),e.confirmModal?(i(),h(l,{key:0},{default:k(()=>[X,o("div",null,[o("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=M(s=>e.confirmModal=!e.confirmModal,["prevent"]))},"Cancel"),o("button",{class:"btn btn-danger",onClick:t[3]||(t[3]=M((...s)=>e.confirmDelete&&e.confirmDelete(...s),["prevent"]))},"Delete")]),o("p",{class:T(["text-danger text-center",{"d-none":!e.activeMessage}])},f(e.notAccessMessage),3)]),_:1})):x("",!0),e.editModal?(i(),h(l,{key:1},{default:k(()=>[Y,(i(!0),b(A,null,B(n.fields,s=>(i(),b("div",{class:"d-flex flex-column align-items-start gap-2",key:s.id},[o("label",null,f(r.$t(s)),1),N(o("input",{type:"text","onUpdate:modelValue":m=>e.editCurrentArray[s]=m},null,8,Z),[[q,e.editCurrentArray[s]]])]))),128)),o("p",$,f(e.editError),1),o("div",null,[o("button",{class:"btn btn-danger",onClick:t[4]||(t[4]=s=>e.editModal=!e.editModal)},"Cancel"),o("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=M(s=>e.editUser(n.fields),["prevent"]))},"Edit")])]),_:1})):x("",!0)])}const de=U(W,[["render",ee]]);export{D as M,de as _,re as a};
