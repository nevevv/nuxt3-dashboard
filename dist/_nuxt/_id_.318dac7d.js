import{u as M,_ as z}from"./GET_REQUESTS.427526b5.js";import{a as D,r as o,C as H,f as u,y as V,h as r,t as m,c as I,I as S,F as k,z as T,j as F,E as q,k as L,o as l,w as O,i as N,B as x}from"./entry.d7d972f8.js";import{u as w}from"./cookie.1d60285c.js";import{u as P}from"./POST_REQUESTS.1b833dc9.js";import{H as G}from"./Head.bb06a6fe.js";import{s as J}from"./vue-multiselect.esm.aec86925.js";import"./index.2d867956.js";const K={setup(){const p=P(),i=M(),g=o(""),e=o([]),_=o([]),h=o(!0),f=o([]),y=o(""),v=o(""),t=o([]),a=o(""),A=o(),b=o([]),j=o([]),B=()=>{const n={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token").value}};i.getRequest(`users/${q().params.id}/edit`,n,s=>{s.data.roles.forEach(c=>{b.value.push({title:c.display_name,id:c.id})}),_.value=Object.keys(s.data),h.value=!1,f.value=s.data,e.value.full_name=s.data.full_name,e.value.login=s.data.login})},C=()=>{const n={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token").value}};i.getRequest("roles",n,s=>{t.value=s.data,s.data.data.forEach(c=>{j.value.push({title:c.display_name,id:c.id})})})},E=n=>{v.value=n.id},R=()=>{const n=[];_.value.forEach(d=>{n[d]=e.value[d]});let{...s}=n;const c=b.value.map(d=>d.id);s.roles=c;const U={method:"POST",body:s,headers:{Authorization:"Bearer "+w("token").value}};p.postRequest(`users/${q().params.id}/update`,U,d=>{d.success?L("/users"):a.value=d.message})};return H(()=>{B(),C()}),{requestError:g,fieldsObj:e,fields:_,loading:h,arr:f,select:y,selectId:v,permissionsArr:t,changeSelect:E,editUser:R,editError:a,editCurrentArray:A,options:j,value:b}},components:{HeadVue:G,Multiselect:J}},Q={class:"d-flex flex-column w-100"},W={class:"fs-3 createNew-title pt-3"},X={class:"createNew-form"},Y=["onUpdate:modelValue"],Z=["onUpdate:modelValue"],$={class:"w-100"},ee={style:{color:"red"}},te={class:"d-flex justify-content-start w-100"};function oe(p,i,g,e,_,h){const f=x("HeadVue"),y=z,v=x("Multiselect");return l(),u("div",Q,[V(f),r("p",W,m(p.$t("edit")),1),r("form",X,[e.loading?(l(),I(y,{key:0})):S("",!0),(l(!0),u(k,null,T(e.fields,t=>(l(),u("div",{class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item",key:t.id},[t!="roles"?(l(),u(k,{key:0},[r("label",null,m(p.$t(t)),1),t!="password"&&t!="password_confirmation"?O((l(),u("input",{key:0,class:"w-100 h-100 createNew-form-input",type:"text","onUpdate:modelValue":a=>e.fieldsObj[t]=a},null,8,Y)),[[N,e.fieldsObj[t]]]):O((l(),u("input",{key:1,class:"w-100 h-100 createNew-form-input",type:"password","onUpdate:modelValue":a=>e.fieldsObj[t]=a},null,8,Z)),[[N,e.fieldsObj[t]]])],64)):(l(),u(k,{key:1},[r("label",null,m(p.$t(t)),1),V(v,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=a=>e.value=a),options:e.options,multiple:!0,"hide-selected":!0,"track-by":"id",label:"title"},null,8,["modelValue","options"])],64))]))),128)),r("div",$,[r("p",ee,m(e.editError),1)]),r("div",te,[r("button",{type:"submit",class:"btn btn-primary createNew-btn",onClick:i[1]||(i[1]=F(t=>e.editUser(),["prevent"]))},m(p.$t("perform")),1)])])])}const de=D(K,[["render",oe],["__scopeId","data-v-495c3518"]]);export{de as default};
