import{_ as x}from"./HeadVue.02c42a3b.js";import{_ as k}from"./Loader.ce1f7a85.js";import{r as d,b as $,c as i,k as q,a as e,t as n,u as l,w as u,e as m,F as V,A as R,f as B,d as A,o as r,n as U}from"./entry.c60b3006.js";import{u as _}from"./cookie.6bf8de49.js";import{u as j}from"./GET_REQUESTS.cd5f1bde.js";import{u as C}from"./POST_REQUESTS.186e5882.js";import"./index.ab3166c5.js";const O={class:"d-flex flex-column w-100"},D={class:"fs-3 createNew-title pt-3"},E={key:0,class:"createNew-form"},S={class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item"},T={class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item"},z={class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item"},F={class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item"},L={class:"d-flex flex-column align-items-start gap-2 mb-3 createNew-form-item"},M={selected:"",disabled:""},P=["value"],G={style:{color:"red"},class:"d-flex w-100 text-danger"},H={class:"d-flex justify-content-start w-100"},ee={__name:"create_new",setup(I){const g=C(),v=j(),f=d(""),a=$({}),w=d(!0),c=d([]),b=()=>{const s={headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer "+_("token").value}};v.getRequest("roles",s,t=>{t.data.forEach(p=>{c.value.push(p),w.value=!1})})},h=async()=>{a.role||(a.role=c.value[0].name);const s={method:"POST",body:a,headers:{Authorization:"Bearer "+_("token").value}};g.postRequest("users/create",s,t=>{t.success?U("/users"):f.value=t.error.message})},N=s=>{a.role=s};return b(),(s,t)=>{const p=x,y=k;return r(),i("div",O,[q(p),e("p",D,n(s.$t("create")),1),l(w)?(r(),A(y,{key:1})):(r(),i("form",E,[e("div",S,[e("label",null,n(s.$t("fullName")),1),u(e("input",{class:"w-100 h-100 createNew-form-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>l(a).full_name=o)},null,512),[[m,l(a).full_name]])]),e("div",T,[e("label",null,n(s.$t("login")),1),u(e("input",{class:"w-100 h-100 createNew-form-input",type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>l(a).login=o)},null,512),[[m,l(a).login]])]),e("div",z,[e("label",null,n(s.$t("password")),1),u(e("input",{class:"w-100 h-100 createNew-form-input",autocomplete:"",type:"password","onUpdate:modelValue":t[2]||(t[2]=o=>l(a).password=o)},null,512),[[m,l(a).password]])]),e("div",F,[e("label",null,n(s.$t("password_confirmation")),1),u(e("input",{class:"w-100 h-100 createNew-form-input",autocomplete:"",type:"password","onUpdate:modelValue":t[3]||(t[3]=o=>l(a).password_confirmation=o)},null,512),[[m,l(a).password_confirmation]])]),e("div",L,[e("label",null,n(s.$t("role")),1),e("select",{class:"form-select","aria-label":"Default select example",onChange:t[4]||(t[4]=o=>N(o.target.value))},[e("option",M,n(s.$t("role")),1),(r(!0),i(V,null,R(l(c),o=>(r(),i("option",{value:o.name,key:o},n(o.name),9,P))),128))],32)]),e("p",G,n(l(f)),1),e("div",H,[e("button",{type:"submit",class:"btn btn-primary createNew-btn",onClick:t[5]||(t[5]=B(o=>h(),["prevent"]))},n(s.$t("create")),1)])]))])}}};export{ee as default};
